<div>
  <div class="dialog-define-object-title">
    Define Object
  </div>
  <div class="fields-header">
    <div>Fields</div>
    <button
      mat-raised-button
      color="primary"
      matTooltip="Add Field"
      matTooltipPosition="above"
      (click)="addNewField()"
    >
      Add Field
    </button>
  </div>
  <mat-card [@.disabled]="disableAnimation">
    <mat-accordion cdkDropList>
      <mat-expansion-panel
        *ngFor="let field of fields; let i = index"
        (opened)="handleFieldPanelStateChange(i)"
        [expanded]="expandedField === i"
        cdkDrag
      >
        <div class="custom-placeholder" *cdkDragPlaceholder></div>
        <mat-expansion-panel-header>
          <div class="menu-panel-header">
            <div class="menu-index-keyname">
              <mat-icon>menu</mat-icon>
              <div>
                <span>1: </span>
                <span class="memu-keyname">{{field.name || 'KeyName'}}</span>
              </div>
            </div>
            <div>{{field.fieldType || 'Type'}}</div>
          </div>
        </mat-expansion-panel-header>
        <div>
          <div class="field-name-type">
            <mat-form-field>
              <mat-label>Name</mat-label>
              <input
                matInput
                placeholder="KeyName"
                name="keyname"
                type="text"
                [value]="field.name"
                (change)="changeFieldName($event.target.value, i)"
              >
            </mat-form-field>
            <mat-form-field>
              <mat-label>Type</mat-label>
              <mat-select
                name="type"
                placeholder="Type"
                [value]="field.fieldType?.toUpperCase()"
                (selectionChange)="updateFieldType($event.value, i)"
              >
                <mat-option
                  *ngFor="let fieldType of fieldTypes"
                  [value]="fieldType.key"
                  [matTooltip]="fieldType.value"
                  matTooltipPosition="left"
                >
                  {{fieldType.value}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="menu-panel-footer">
            <app-neo-smart-token-specs-dialog-field-type
              [type]="field.fieldType"
              [field]="field"
              [index]="i"
              (onContentUpdate)="updateNonObjectField($event)"
              (openDefineObjectModal)="openDefineObjectModal($event)"
            >
            </app-neo-smart-token-specs-dialog-field-type>
            <div class="field-buttons">
              <button
                mat-raised-button
                color="primary"
                matTooltip="Duplicate Field"
                matTooltipPosition="above"
                (click)="duplicateField(field)"
              >
                <mat-icon>file_copy</mat-icon>
              </button>
              <button
                mat-raised-button
                color="primary"
                matTooltip="Remove"
                matTooltipPosition="above"
                (click)="removeField(i)"
              >
                <mat-icon>delete_outline</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-card>

  <div style="margin-top: 20px">
    <button
      mat-raised-button
      color="primary"
      matTooltip="Remove"
      matTooltipPosition="above"
      (click)="submit()"
    >
      OK
    </button>
    <button
      mat-raised-button
      matTooltip="Remove"
      matTooltipPosition="above"
      style="margin-left: 10px"
      (click)="close()"
    >
      Cancel
    </button>
  </div>
</div>
